(()=>{"use strict";const e=(e,t="")=>{e&&(t?(e.textContent=t,e.hidden=!1):e.hidden=!0)},t=e=>{const t=document.createElement("div");t.className="project-expanded",t.setAttribute("aria-hidden","true");const n=document.createElement("div");n.className="project-expanded__backdrop";const a=document.createElement("article");a.className="project-expanded__panel",a.setAttribute("aria-label",`${e.title??"Project"} details`);const r=document.createElement("header");r.className="project-expanded__header";const o=document.createElement("h2");o.className="project-expanded__title",o.textContent=e.title??"Untitled Project";const c=document.createElement("p");c.className="project-expanded__description",c.textContent=e.description??"More details coming soon.";const d=document.createElement("a");d.className="project-expanded__link",d.href=e.url??"#",d.textContent=e.linkText??"Learn more",d.target="_blank",d.rel="noopener noreferrer",r.append(o,c,d);const s=document.createElement("div");s.className="project-expanded__body";const i=(e=>{if(!Array.isArray(e)||0===e.length)return null;const t=document.createElement("section");t.className="project-expanded__section";const n=document.createElement("h3");n.className="project-expanded__heading",n.textContent="Highlights",t.append(n);const a=document.createElement("ul");return a.className="project-expanded__details-list",e.forEach((e=>{if(!e)return;const t=document.createElement("li");t.textContent=e,a.append(t)})),t.append(a),t})(e.details);i&&s.append(i);const l=((e,t)=>{if(!e||!e.src)return null;const n=document.createElement("section");n.className="project-expanded__section project-expanded__section--media";const a=document.createElement("h3");if(a.className="project-expanded__heading",a.textContent="video"===e.type?"Preview":"Snapshot",n.append(a),"video"===e.type){const t=document.createElement("video");t.className="project-expanded__media",t.src=e.src,t.controls=!0,t.preload="metadata",t.playsInline=!0,e.poster&&(t.poster=e.poster),n.append(t)}else{const a=document.createElement("img");a.className="project-expanded__media",a.src=e.src,a.alt=e.alt??`${t??"Project"} preview`,a.loading="lazy",n.append(a)}return n})(e.media,e.title);return l&&s.append(l),a.append(r,s),t.append(n,a),{root:t,backdrop:n,panel:a}},n=async()=>{const n=document.querySelector("[data-projects-grid]"),a=document.querySelector("[data-projects-status]");if(n)try{e(a,"Loading projectsâ€¦");const r=await fetch("data/projects.json",{cache:"no-store"});if(!r.ok)throw new Error(`Request failed with status ${r.status}`);const o=await r.json(),c=Array.isArray(o)?o:Array.isArray(o?.projects)?o.projects:[];if(!c.length)throw new Error("Received empty project list");const d=document.createDocumentFragment();c.forEach((e=>{d.append((e=>{const n=document.createElement("div");n.className="grid-item",n.tabIndex=0;const a=document.createElement("div");a.className="project-summary";const r=document.createElement("h2");r.className="project-title",r.textContent=e.title??"Untitled Project";const o=document.createElement("p");o.className="project-description",o.textContent=e.description??"More details coming soon.";const c=document.createElement("a");c.className="project-link",c.href=e.url??"#",c.textContent=e.linkText??"Learn more",a.append(r,o,c);const d=t(e),s=()=>{n.classList.add("grid-item--expanded"),d.root.setAttribute("aria-hidden","false")},i=e=>{e?.relatedTarget&&n.contains(e.relatedTarget)||(n.classList.remove("grid-item--expanded"),d.root.setAttribute("aria-hidden","true"))};return n.addEventListener("mouseenter",s),n.addEventListener("mouseleave",i),n.addEventListener("focusin",s),n.addEventListener("focusout",i),d.backdrop.addEventListener("click",i),d.panel.addEventListener("keydown",(e=>{"Escape"===e.key&&(i(e),n.focus({preventScroll:!0}))})),n.append(a,d.root),n})(e))})),n.replaceChildren(d),e(a)}catch(t){n.textContent="",e(a,"Unable to load projects right now. Please try again later."),console.error("Failed to render projects:",t)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();
(()=>{"use strict";const e=(e,t="")=>{e&&(t?(e.textContent=t,e.hidden=!1):e.hidden=!0)},t=e=>{const t=document.createElement("div");t.className="project-expanded",t.setAttribute("aria-hidden","true");const n=document.createElement("div");n.className="project-expanded__backdrop";const a=document.createElement("article");a.className="project-expanded__panel",a.setAttribute("aria-label",`${e.title??"Project"} details`);const c=document.createElement("header");c.className="project-expanded__header";const o=document.createElement("h2");o.className="project-expanded__title",o.textContent=e.title??"Untitled Project";const r=document.createElement("p");r.className="project-expanded__description",r.textContent=e.description??"More details coming soon.";const d=document.createElement("a");d.className="project-expanded__link",d.href=e.url??"#",d.textContent=e.linkText??"Learn more",d.target="_blank",d.rel="noopener noreferrer",c.append(o,r,d);const s=(e=>{if(!Array.isArray(e)||0===e.length)return null;const t=document.createElement("section");t.className="project-expanded__section";const n=document.createElement("h3");n.className="project-expanded__heading",n.textContent="Highlights",t.append(n);const a=document.createElement("ul");return a.className="project-expanded__details-list",e.forEach((e=>{if(!e)return;const t=document.createElement("li");t.textContent=e,a.append(t)})),t.append(a),t})(e.details),l=((e,t)=>{if(!e||!e.src)return null;const n=document.createElement("section");n.className="project-expanded__section project-expanded__section--media";const a=document.createElement("h3");if(a.className="project-expanded__heading",a.textContent="video"===e.type?"Preview":"Snapshot",n.append(a),"video"===e.type){const t=document.createElement("video");t.className="project-expanded__media",t.src=e.src,t.controls=!0,t.preload="metadata",t.playsInline=!0,e.poster&&(t.poster=e.poster),n.append(t)}else{const a=document.createElement("img");a.className="project-expanded__media",a.src=e.src,a.alt=e.alt??`${t??"Project"} preview`,a.loading="lazy",n.append(a)}return n})(e.media,e.title),i=document.createElement("div");i.className="project-expanded__layout";const p=document.createElement("div");if(p.className="project-expanded__column project-expanded__column--info",p.append(c),s&&p.append(s),i.append(p),l){const e=document.createElement("div");e.className="project-expanded__column project-expanded__column--media",e.append(l),i.append(e)}else i.classList.add("project-expanded__layout--single");return a.append(i),t.append(n,a),{root:t,backdrop:n,panel:a}},n=async()=>{const n=document.querySelector("[data-projects-grid]"),a=document.querySelector("[data-projects-status]");if(n)try{e(a,"Loading projectsâ€¦");const c=await fetch("data/projects.json",{cache:"no-store"});if(!c.ok)throw new Error(`Request failed with status ${c.status}`);const o=await c.json(),r=Array.isArray(o)?o:Array.isArray(o?.projects)?o.projects:[];if(!r.length)throw new Error("Received empty project list");const d=document.createDocumentFragment();r.forEach((e=>{d.append((e=>{const n=document.createElement("div");n.className="grid-item",n.tabIndex=0;const a=document.createElement("div");a.className="project-summary";const c=document.createElement("h2");c.className="project-title",c.textContent=e.title??"Untitled Project";const o=document.createElement("p");o.className="project-description",o.textContent=e.description??"More details coming soon.";const r=document.createElement("a");r.className="project-link",r.href=e.url??"#",r.textContent=e.linkText??"Learn more",a.append(c,o,r);const d=t(e),s=()=>{n.classList.add("grid-item--expanded"),d.root.setAttribute("aria-hidden","false")},l=e=>{e?.relatedTarget&&n.contains(e.relatedTarget)||(n.classList.remove("grid-item--expanded"),d.root.setAttribute("aria-hidden","true"))};return n.addEventListener("mouseenter",s),n.addEventListener("mouseleave",l),n.addEventListener("focusin",s),n.addEventListener("focusout",l),d.backdrop.addEventListener("click",l),d.panel.addEventListener("keydown",(e=>{"Escape"===e.key&&(l(e),n.focus({preventScroll:!0}))})),n.append(a,d.root),n})(e))})),n.replaceChildren(d),e(a)}catch(t){n.textContent="",e(a,"Unable to load projects right now. Please try again later."),console.error("Failed to render projects:",t)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();
(()=>{"use strict";const e=(e,t="")=>{e&&(t?(e.textContent=t,e.hidden=!1):e.hidden=!0)},t=e=>{const t=document.createElement("div");t.className="project-expanded",t.setAttribute("aria-hidden","true");const n=document.createElement("div");n.className="project-expanded__backdrop";const a=document.createElement("article");a.className="project-expanded__panel",a.setAttribute("aria-label",`${e.title??"Project"} details`);const o=document.createElement("header");o.className="project-expanded__header";const r=document.createElement("h2");r.className="project-expanded__title",r.textContent=e.title??"Untitled Project";const c=document.createElement("p");c.className="project-expanded__description",c.textContent=e.description??"More details coming soon.";const d=document.createElement("a");d.className="project-expanded__link",d.href=e.url??"#",d.textContent=e.linkText??"Learn more",d.target="_blank",d.rel="noopener noreferrer",o.append(r,c,d);const s=(e=>{if(!Array.isArray(e)||0===e.length)return null;const t=document.createElement("section");t.className="project-expanded__section";const n=document.createElement("h3");n.className="project-expanded__heading",n.textContent="Highlights",t.append(n);const a=document.createElement("ul");return a.className="project-expanded__details-list",e.forEach((e=>{if(!e)return;const t=document.createElement("li");t.textContent=e,a.append(t)})),t.append(a),t})(e.details),p=((e,t)=>{if(!e||!e.src)return null;const n=document.createElement("section");n.className="project-expanded__section project-expanded__section--media";const a=document.createElement("h3");if(a.className="project-expanded__heading",a.textContent="video"===e.type?"Preview":"Snapshot",n.append(a),"video"===e.type){const t=document.createElement("video");t.className="project-expanded__media",t.src=e.src,t.controls=!0,t.preload="metadata",t.playsInline=!0,e.poster&&(t.poster=e.poster),n.append(t)}else{const a=document.createElement("img");a.className="project-expanded__media",a.src=e.src,a.alt=e.alt??`${t??"Project"} preview`,a.loading="lazy",n.append(a)}return n})(e.media,e.title),l=document.createElement("div");l.className="project-expanded__layout";const i=document.createElement("div");if(i.className="project-expanded__column project-expanded__column--info",i.append(o),s&&i.append(s),l.append(i),p){const e=document.createElement("div");e.className="project-expanded__column project-expanded__column--media",e.append(p),l.append(e)}else l.classList.add("project-expanded__layout--single");return a.append(l),t.append(n,a),{root:t,backdrop:n,panel:a}},n=async()=>{const n=document.querySelector("[data-projects-grid]"),a=document.querySelector("[data-projects-status]");if(n)try{e(a,"Loading projectsâ€¦");const o=await fetch("data/projects.json",{cache:"no-store"});if(!o.ok)throw new Error(`Request failed with status ${o.status}`);const r=await o.json(),c=Array.isArray(r)?r:Array.isArray(r?.projects)?r.projects:[];if(!c.length)throw new Error("Received empty project list");const d=document.createDocumentFragment();c.forEach((e=>{const{wrapper:n}=(e=>{const n=document.createElement("div");n.className="grid-item",n.tabIndex=0;const a=document.createElement("div");a.className="project-summary";const o=document.createElement("h2");o.className="project-title",o.textContent=e.title??"Untitled Project";const r=document.createElement("p");r.className="project-description",r.textContent=e.description??"More details coming soon.";const c=document.createElement("a");c.className="project-link",c.href=e.url??"#",c.textContent=e.linkText??"Learn more",a.append(o,r,c);const d=t(e),s=()=>{n.classList.add("grid-item--expanded"),d.root.setAttribute("aria-hidden","false"),document.body.append(d.root)},p=e=>{e?.relatedTarget&&n.contains(e.relatedTarget)||(n.classList.remove("grid-item--expanded"),d.root.setAttribute("aria-hidden","true"),d.root.parentNode&&d.root.remove())};return n.addEventListener("mouseenter",s),n.addEventListener("mouseleave",p),n.addEventListener("focusin",s),n.addEventListener("focusout",p),d.backdrop.addEventListener("click",p),d.panel.addEventListener("keydown",(e=>{"Escape"===e.key&&(p(e),n.focus({preventScroll:!0}))})),n.append(a),{wrapper:n,expanded:d}})(e);d.append(n)})),n.replaceChildren(d),e(a)}catch(t){n.textContent="",e(a,"Unable to load projects right now. Please try again later."),console.error("Failed to render projects:",t)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();